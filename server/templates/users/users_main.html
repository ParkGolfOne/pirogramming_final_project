{% extends 'base.html' %}
{%load static%}
{% block head %}
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="{% static 'users/css/user.css' %}" />
<title>마이페이지</title>
{% endblock %}

{% block content %}
  {% if user.is_authenticated %} {% if now_user.id == pk %}
    <h1>{{user.nickname}}님 페이지</h1>
    <div class="user-mypage-container">
      <div class="user-mypage-header">
        {% comment %} <div class="user-mypage-profile">
          <img src="{{user.profile_image.url}}" alt="프로필 이미지" />
        </div> {% endcomment %}
        <div class="user-mypage-info">
          <p>아이디: {{user.username}}</p>
          <h2>닉네임: {{user.nickname}}</h2>
        </div>
      </div>
      <div class="user-mypage">
        <h3 class="user-mypage-title">좋아요 누른 글</h3>
          {% for like in my_likes%}
          <div>
          <a href="{% url 'communitys:post_detail' like.post.board.id like.post.id%}">
          <span>{{like.post.title}}</span>
          <span>{{like.post.writer.username}}</span>
          </a>
          </div>
          {% endfor %}
          </div>
          <div class="user-mypage">
            <h3 class="user-mypage-title">스크랩한 글</h3>
            {% for scrap in my_scraps%}
            <div>
              <a
                href="{% url 'communitys:post_detail' scrap.post.board.id scrap.post.id%}"
                ><span>{{scrap.post.title}}</span
                ><span>{{scrap.post.writer.username}}</span></a
              >
            </div>
            {% endfor %}
          </div>
          <div class="user-mypage">
            <h3 class="user-mypage-title">내가 작성한 글</h3>
            {% for post in my_posts%}
            <div>
              <a href="{% url 'communitys:post_detail' post.board.id post.id%}"
                ><span>{{post.title}}</span><span>{{post.writer.username}}</span></a
              >
            </div>
            {% endfor %}
          </div>
    </div>
    <div class="user-btn-container">
      <div class="user-btn-box">
        <h3 class="user-btn-title">친구</h3>
        <a href="{% url 'users:add_friend' user.pk %}" class="user-mypage-btn">친구신청 보내기</a>
        <a href="{% url 'users:friend_list' user.pk %}" class="user-mypage-btn">내 친구 보기</a>
      </div>
      <div class="user-btn-box">
        <h3 class="user-btn-title">계정</h3>
        <a href="{% url 'users:update' user.pk %}" class="user-mypage-btn">회원정보 수정</a>
        <form method="post" action="{% url 'users:delete' user.pk %}" class="user-mypage-btn">
          <button type="submit">회원 탈퇴</button>
        </form>
      </div>
    </div>
    
    {%else%}
    <h1>{{user.nickname}}님 페이지</h1>
    <div>자기소개?</div>
    {% endif %} {% else %}
    <div><a href="{% url 'users:login' %}">로그인</a></div>
    <div><a href="{% url 'social:begin' 'kakao' %}">카카오 로그인</a></div>
    <div><a href="{% url 'social:begin' 'naver' %}">네이버 로그인</a></div>
    <div><a href="{% url 'users:signup' %}">회원가입</a></div>
    {% endif %} 
{% endblock %}